<!-- Site wrapper -->
<div class="wrapper">
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <!-- Main content -->
      <section class="content">
        <div class="row">
          <div class="col-md-12">
            <div class="card card-primary card-outline">
              <div class="card-header">
                <div class="row">
                  <div class="col-md-6">
                    <h5 class="card-title-md">HR New Report </h5>
                  
                  </div>
                  <div class="col-md-6" style="text-align: right;" >
                    <button class="btn btn-info mt-2" data-toggle="modal" data-target="#hrSummaryModal" (click)="getsummary()">Summary</button>
                    &nbsp;
                    <button class="btn btn-primary mt-2" (click)="getData()">View</button>
                    &nbsp;
                    <button type="button" label="EXCEL" (click)="dt.exportCSV()" class="btn btn-success mt-2">
                      <i class="fa fa-file-excel-o"></i> Export</button></div>
                </div>
  
                <!-- Modal -->
<div class="modal fade" id="hrSummaryModal" tabindex="-1" role="dialog" aria-labelledby="hrSummaryModal" aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
          <div class="container-fluid">
            <div class="row">
              <div class="col-3 d-flex justify-content-start align-items-center p-2">
                <h5 class="modal-title" id="hrSummaryModal">HR Summary Bill</h5>
              </div>
              <div class="col d-flex justify-content-end align-items-center">
                <div class="d-flex justify-content-center align-items-center" style="height: 40px; width: 200px; border:1px solid black;border-radius: .25rem; background: blue; color: antiquewhite;">GUJARAT MANPOWER</div>
              </div>
              <div class="col d-flex justify-content-center align-items-center">
                <div class="col bg-info d-flex justify-content-end align-items-center mr-2"  style="height: 40px;border:1px solid black;border-radius: .25rem;">
                    {{Fromdate}}
                <div class="ml-2" style=" border-left: 1px solid black;height: 40px;"></div>
                <div class="col d-flex justify-content-center align-items-center">
                  <i class="fa fa-calendar" aria-hidden="true"></i>
                </div>
              </div>
                TO
              <div class="col bg-info d-flex justify-content-end align-items-center ml-2"  style="height:40px;border:1px solid black;border-radius: .25rem;">
                    {{Todate}}
                 <div class="ml-2" style=" border-left: 1px solid black;height: 40px;"></div>
                  <div class="col d-flex justify-content-center align-items-center">
                    <i class="fa fa-calendar" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
         
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    <form #form="ngForm" autocomplete="off" (submit)="onSubmit(form)">
      <div class="modal-body">
         <div class="row">
           <div class="col-md-4">
            
            <div class="form-group">
                Basic
              <input type="number" class="form-control" name="basic" [(ngModel)]="hrbillservice.hrbillsSumData.basic" required>
              <input type="hidden" class="form-control"  name="id" [(ngModel)]="hrbillservice.hrbillsSumData.id" >
            </div>
            <div class="form-group">
              HRA
              <input type="number" class="form-control" name="hra" [(ngModel)]="hrbillservice.hrbillsSumData.hra" required>
            </div>
            <div class="form-group">
              Conveyance
              <input type="number" class="form-control" name="conveyence" [(ngModel)]="hrbillservice.hrbillsSumData.conveyence" required>
            </div>
            <div class="form-group">
              OT Pay
              <input type="number" class="form-control" name="otpay" [(ngModel)]="hrbillservice.hrbillsSumData.otpay" required>
           </div>
          </div>
          <div class="col-md-4">
           <div class="form-group">
              <label class="text-primary">Supervisor Charge</label>
              <input type="number" class="form-control" name="supervicercharge" (change)="sum()" [(ngModel)]="hrbillservice.hrbillsSumData.supervicercharge" required>
            </div>
            <div class="form-group">
              <label class="text-primary">Additional Charges 1</label>
              <input type="number" class="form-control" name="adcharge1" (change)="sum()" [(ngModel)]="hrbillservice.hrbillsSumData.adcharge1" required>
            </div>
            <div class="form-group">
              <label class="text-primary">Additional Charges 2</label>
              <input type="number" class="form-control" name="adcharge2" (change)="sum()" [(ngModel)]="hrbillservice.hrbillsSumData.adcharge2" required>
            </div>
            <div class="form-group">
              <label class="text-primary">Additional Charges 3</label>
              <input type="number" class="form-control" name="adcharge3" (change)="sum()" [(ngModel)]="hrbillservice.hrbillsSumData.adcharge3" required>
            </div>
            <div class="form-group">
              <label class="text-danger">Total</label>
              <input type="number" class="form-control" name="subtotal" (change)="sum()" [(ngModel)]="hrbillservice.hrbillsSumData.subtotal"  required>
            </div>
          </div>
           <div class="col-md-4">
            <div class="form-group">
             Agency 8%
              <input type="number" class="form-control" name="agency" (change)="sum()" [(ngModel)]="hrbillservice.hrbillsSumData.agency" required>
            </div>
            <div class="form-group">
              PF
              <input type="number" class="form-control" name="pftot" (change)="sum()" [(ngModel)]="hrbillservice.hrbillsSumData.pftot" required>
            </div>
            <div class="form-group">
              <label class="text-danger">Total</label>
              <input type="number" class="form-control" (change)="sum()" name="total" [(ngModel)]="hrbillservice.hrbillsSumData.total" required>
            </div>
            <div class="form-group">
             GST 18%
              <input type="number" class="form-control" (change)="sum()" name="gsttot" [(ngModel)]="hrbillservice.hrbillsSumData.gsttot" required>
              <input type="hidden" class="form-control" name="cDate" (change)="sum()" [(ngModel)]="cDate" required>

            </div>
            <div class="form-group">
              <label class="text-danger">Net TOTAL</label>
              <input type="number" class="form-control" (change)="sum()" name="nettotal"  [(ngModel)]="hrbillservice.hrbillsSumData.nettotal" required>
            </div>
          </div>
         </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-info" (click)="loadbill()">Load Bill</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
    </form>
    </div>

  </div>
</div>
              </div>
              <div class="card-header">
                <div class="row">
                  <!--<div class="col-md-2 mt-2">
                    
                  </div>-->
                  <div class="col-md-3" style="text-align: center;">
                    <div class="row mt-2">
                      <div class="col-md-2">
                        <label>From</label>
                      </div>
                      <div class="col-md-10">
                        <p-calendar aria-placeholder="From Date" name="fromdate" #fromdate="ngModel"
                          [(ngModel)]="this.Fromdate" class="input-append date" dateFormat="yy-mm-dd" dataType="string"
                          [showIcon]="true">
                        </p-calendar>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-3" style="text-align: center;">
                    <div class="row mt-2">
                      <div class="col-md-2">
                        <label>To</label>
                      </div>
                      <div class="col-md-10" style="text-align: left;">
                        <p-calendar aria-placeholder="To Date" name="todate" #todate="ngModel" [(ngModel)]="this.Todate"
                          class="input-append date" dateFormat="yy-mm-dd" dataType="string" [showIcon]="true">
                        </p-calendar>
                      </div>
                    </div>
  
                  </div>
                  <div class="col-md-2" style="padding: unset;">
                    <button (click)="refreshDropdown()" class="btn btn-danger mt-2" style="margin-right: 24px;">
                      <i class="fa fa-refresh"></i> </button>
  
                    <select class="custom-select  mt-2" name="month" (change)="selectedAh($event.target.value)"
                      #Month='ngModel' [(ngModel)]='selectedah' style="width: 52%;">
                      <option value="All">All</option>
                      <option value="08 - Hrs">08-Hrs</option>
                      <option value="11 - Hrs">11-Hrs</option>
                      <option value="12 - Hrs">12-Hrs</option>
                      <option value="13 - Hrs">13-Hrs</option>
                      <option value="14 - Hrs">14-Hrs</option>
                      <option value="15 - Hrs">15-Hrs</option>
                      <option value="16 - Hrs">16-Hrs</option>
                      <option value="17 - Hrs">17-Hrs</option>
                      <option value="18 - Hrs">18-Hrs</option>
                      <option value="19 - Hrs">19-Hrs</option>
                      <option value="20 - Hrs">20-Hrs</option>
                      <option value="21 - Hrs">21-Hrs</option>
                    </select>
                  </div>
                  <div class="col-md-2">
                    <select class="custom-select mt-2" name="myselect" #mySelect="ngModel"
                      [(ngModel)]="this.selectedPlant" (change)="selectedGrid($event.target.value)">
                      <option value="All">All</option>
                      <option value="{{cmpny.companyFName}}" *ngFor="let cmpny of this.asservice.attendancesummary">
                        {{cmpny.companyFName}}</option>
                    </select>
                  </div>
                  <div class="col-md-2">
                    <select class="custom-select mt-2"  *ngIf="plantservice" name="myselectloc" #mySelectloc
                      (change)="selectedlocation($event.target.value)" >
                      <option value="All">
                        All Company
                      </option>
                      <option *ngFor="let pl of plantservice.splantlist" value="{{pl.plantcode}}">
                        {{ pl.plantshortname }}
                      </option>
                    </select>
        
                  </div>
                    
                </div>
              </div>
              <!-- </form> -->
              <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>
              <p-table #dt [columns]="cols" [style]="{'text-align': 'center', 'font-size': '0.7em'}" [responsive]="true"
                selectionMode="single" [style]="{'width':'100%'}" [(selection)]="selectedItemrej"
                [value]="hrcalservice.hrcalList" [paginator]="true" [rows]="20" [resizableColumns]="true">
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <td colspan="2" style="width: 200px;">
                      <div class="input-group mb-1 mt-2">
                        <input type="text" class="form-control" pInputText placeholder="Global Filter"
                        (input)="loadper($event.target.value , dt)"
                        (input)="dt.filterGlobal($event.target.value, 'contains')">
                        <div class="input-group-append">
                          <i class="fa fa-search input-group-text"></i>
                        </div>
                      </div>
                    </td>
                    <td style="width: 120px;"></td>
                    <!--<td>
                      <button class="btn bg-success mt-2  w-100">{{totalHours}}</button>
                    </td>
                    <td>
                      <button class="btn bg-info mt-2  w-100">{{wopOvertime}}</button>
                    </td>
                    <td>
                      <button class="btn bg-danger mt-2  w-100">{{hpOvertime}}</button>
                    </td>
                    <td>
                      <button class="btn bg-dark mt-2  w-100">{{povertime}}</button>
                    </td>
                    <td>
                      <button class="btn bg-warning mt-2  w-100">{{total_wkd_hrs}}</button>
                    </td>
                    <td>
                      <button class="btn bg-primary mt-2  w-100">{{pdays}}</button>
                    </td>
                    <td>
                      <button class="btn bg-other mt-2  w-100">{{wopdays}}</button>
                    </td>
                    <td>
                      <button class="btn bg-action-plan mt-2  w-100">{{hpdays}}</button>
                    </td>
                    <td>
                      <button class="btn bg-moulded mt-2  w-100">{{tpresent}}</button>
                    </td>
                    <td></td>
                    <td>
                      <button class="btn bg-capital mt-2  w-100">{{incentive}}</button>
                    </td> -->
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>
                      <button class="btn bg-planting-per mt-2  w-100">{{p_day_hrs}}</button>
                    </td>
                    <td>
                      <button class="btn bg-othersqty mt-2  w-100">{{ot_hrs}}</button>
                    </td>
                    <td>
                      <button class="btn bg-primary mt-2  w-100">{{pdays}}</button>
                    </td>
                    <td>
                      <button class="btn bg-success mt-2  w-100">{{basic}}</button>
                    </td>
                    <td>
                      <button class="btn bg-warning mt-2  w-100">{{hra}}</button>
                    </td>
                    <td>
                      <button class="btn bg-others_value mt-2  w-100">{{conveyance}}</button>
                    </td>
                    <td>
                      <button class="btn bg-hr mt-2  w-100">{{ot_pay}}</button>
                    </td>
                    <td>
                      <button class="btn bg-compliance mt-2  w-100">{{pf}}</button>
                    </td>
                    <td>
                      <button class="btn bg-tool-def mt-2  w-100">{{total_pay}}</button>
                    </td>
  
                  </tr>
                  <tr>
                    <th *ngFor="let col of columns" [pSortableColumn]="col.field" [class]="col.field" pResizableColumn>
                      {{col.header}}
                      <p-sortIcon [field]="col.field" ariaLabel="Activate to sort"
                        ariaLabelDesc="Activate to sort in descending order"
                        ariaLabelAsc="Activate to sort in ascending order">
                      </p-sortIcon>
                    </th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-columns="columns">
                  <tr [pSelectableRow]="rowData">
                    <td *ngFor="let col of columns" class="ui-resizable-column">
                      <span *ngIf="col.field=='doj' " style="font-size: 11px;">
                        {{rowData[col.field] | date :'dd-MM-y'}}
                      </span>
                      <span *ngIf="col.field=='incentivetotal' " style="font-size: 11px;">
                        {{rowData[col.field] |  number:'1.2-2' }}
                      </span>
                      <span *ngIf="col.field !='doj' && col.field!='incentivetotal' " style="font-size: 11px;">
                        {{rowData[col.field]}}
                      </span>
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
        </div>
  
      </section>
  
    </div>
  </div>